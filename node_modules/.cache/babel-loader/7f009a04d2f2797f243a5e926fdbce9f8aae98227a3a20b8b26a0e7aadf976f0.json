{"ast":null,"code":"import _objectSpread from\"C:/Page/Projects/Projects/MSCHealth/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from\"react\";import{useNavigate,useSearchParams}from\"react-router-dom\";import\"./Consultation.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Consultation=_ref=>{let{title,SearchComponent,DoctorCardComponent,isInstant=false}=_ref;const[searchParams]=useSearchParams();const[doctors,setDoctors]=useState([]);const[filteredDoctors,setFilteredDoctors]=useState([]);const[searchText,setSearchText]=useState(\"\");const[loadingDoctors,setLoadingDoctors]=useState(true);const[loadingSearch,setLoadingSearch]=useState(true);const navigate=useNavigate();useEffect(()=>{const authtoken=sessionStorage.getItem(\"auth-token\");if(!authtoken){navigate(\"/login\");return;}setLoadingDoctors(true);fetch(\"\".concat(process.env.REACT_APP_API_BASE_URL,\"/doctors\")).then(res=>res.json()).then(data=>{const typeFilter=isInstant?\"instant\":\"normal\";const filteredByType=data.filter(doctor=>doctor.type===typeFilter);setDoctors(filteredByType);const speciality=searchParams.get(\"speciality\");if(speciality){const filtered=filteredByType.filter(doctor=>doctor.speciality.toLowerCase().includes(speciality.toLowerCase()));setFilteredDoctors(filtered);setSearchText(speciality);}else{setFilteredDoctors(filteredByType);}}).catch(err=>console.error(\"Error fetching doctors:\",err)).finally(()=>setLoadingDoctors(false));},[searchParams,navigate,isInstant]);const handleSearch=_ref2=>{let{searchText,selectedSpeciality,selectedRating}=_ref2;let filtered=doctors;if(searchText){const lowerSearch=searchText.toLowerCase();filtered=filtered.filter(doctor=>doctor.name.toLowerCase().includes(lowerSearch)||doctor.speciality.toLowerCase().includes(lowerSearch));}if(selectedSpeciality){filtered=filtered.filter(doctor=>doctor.speciality===selectedSpeciality);}if(selectedRating){filtered=filtered.filter(doctor=>doctor.ratings===selectedRating);}setFilteredDoctors(filtered);setSearchText(searchText);};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid py-4 custom-padding-mobile\",children:[/*#__PURE__*/_jsx(SearchComponent,{isInstant:isInstant,onSearch:handleSearch,setSearchLoading:setLoadingSearch}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[filteredDoctors.length,\" doctors available\"]}),/*#__PURE__*/_jsx(\"h5\",{className:\"text-muted\",children:\"Book appointments with minimum wait-time & verified doctor details\"})]}),loadingDoctors||loadingSearch?/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})}):filteredDoctors.length>0?/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:filteredDoctors.map(doctor=>/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-sm-4 col-md-3 mb-4\",children:/*#__PURE__*/_jsx(DoctorCardComponent,_objectSpread(_objectSpread({},doctor),{},{highlight:searchText,isInstant:isInstant}))},doctor.id||doctor.name))}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:\"No doctors found.\"})})]});};export default Consultation;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useSearchParams","jsx","_jsx","jsxs","_jsxs","Consultation","_ref","title","SearchComponent","DoctorCardComponent","isInstant","searchParams","doctors","setDoctors","filteredDoctors","setFilteredDoctors","searchText","setSearchText","loadingDoctors","setLoadingDoctors","loadingSearch","setLoadingSearch","navigate","authtoken","sessionStorage","getItem","fetch","concat","process","env","REACT_APP_API_BASE_URL","then","res","json","data","typeFilter","filteredByType","filter","doctor","type","speciality","get","filtered","toLowerCase","includes","catch","err","console","error","finally","handleSearch","_ref2","selectedSpeciality","selectedRating","lowerSearch","name","ratings","className","children","onSearch","setSearchLoading","length","map","_objectSpread","highlight","id"],"sources":["C:/Page/Projects/Projects/MSCHealth/src/Components/Consultations/Consultation.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useSearchParams } from \"react-router-dom\";\r\nimport \"./Consultation.css\";\r\n\r\nconst Consultation = ({\r\n  title,\r\n  SearchComponent,\r\n  DoctorCardComponent,\r\n  isInstant = false,\r\n}) => {\r\n  const [searchParams] = useSearchParams();\r\n  const [doctors, setDoctors] = useState([]);\r\n  const [filteredDoctors, setFilteredDoctors] = useState([]);\r\n  const [searchText, setSearchText] = useState(\"\");\r\n  const [loadingDoctors, setLoadingDoctors] = useState(true);\r\n  const [loadingSearch, setLoadingSearch] = useState(true);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const authtoken = sessionStorage.getItem(\"auth-token\");\r\n    if (!authtoken) {\r\n      navigate(\"/login\");\r\n      return;\r\n    }\r\n\r\n    setLoadingDoctors(true);\r\n\r\n    fetch(`${process.env.REACT_APP_API_BASE_URL}/doctors`)\r\n      .then((res) => res.json())\r\n      .then((data) => {\r\n        const typeFilter = isInstant ? \"instant\" : \"normal\";\r\n        const filteredByType = data.filter(\r\n          (doctor) => doctor.type === typeFilter\r\n        );\r\n\r\n        setDoctors(filteredByType);\r\n\r\n        const speciality = searchParams.get(\"speciality\");\r\n        if (speciality) {\r\n          const filtered = filteredByType.filter((doctor) =>\r\n            doctor.speciality.toLowerCase().includes(speciality.toLowerCase())\r\n          );\r\n          setFilteredDoctors(filtered);\r\n          setSearchText(speciality);\r\n        } else {\r\n          setFilteredDoctors(filteredByType);\r\n        }\r\n      })\r\n      .catch((err) => console.error(\"Error fetching doctors:\", err))\r\n      .finally(() => setLoadingDoctors(false));\r\n  }, [searchParams, navigate, isInstant]);\r\n\r\n  const handleSearch = ({ searchText, selectedSpeciality, selectedRating }) => {\r\n    let filtered = doctors;\r\n\r\n    if (searchText) {\r\n      const lowerSearch = searchText.toLowerCase();\r\n      filtered = filtered.filter(\r\n        (doctor) =>\r\n          doctor.name.toLowerCase().includes(lowerSearch) ||\r\n          doctor.speciality.toLowerCase().includes(lowerSearch)\r\n      );\r\n    }\r\n\r\n    if (selectedSpeciality) {\r\n      filtered = filtered.filter(\r\n        (doctor) => doctor.speciality === selectedSpeciality\r\n      );\r\n    }\r\n\r\n    if (selectedRating) {\r\n      filtered = filtered.filter((doctor) => doctor.ratings === selectedRating);\r\n    }\r\n\r\n    setFilteredDoctors(filtered);\r\n    setSearchText(searchText);\r\n  };\r\n\r\n  return (\r\n    <div className=\"container-fluid py-4 custom-padding-mobile\">\r\n      <SearchComponent\r\n        isInstant={isInstant}\r\n        onSearch={handleSearch}\r\n        setSearchLoading={setLoadingSearch}\r\n      />\r\n\r\n      <div className=\"text-center\">\r\n        <h2>{filteredDoctors.length} doctors available</h2>\r\n        <h5 className=\"text-muted\">\r\n          Book appointments with minimum wait-time & verified doctor details\r\n        </h5>\r\n      </div>\r\n\r\n      {loadingDoctors || loadingSearch ? (\r\n        <div className=\"text-center\">\r\n          <p>Loading...</p>\r\n        </div>\r\n      ) : filteredDoctors.length > 0 ? (\r\n        <div className=\"row\">\r\n          {filteredDoctors.map((doctor) => (\r\n            <div\r\n              className=\"col-6 col-sm-4 col-md-3 mb-4\"\r\n              key={doctor.id || doctor.name}\r\n            >\r\n              <DoctorCardComponent\r\n                {...doctor}\r\n                highlight={searchText}\r\n                isInstant={isInstant}\r\n              />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center\">\r\n          <p className=\"text-danger\">No doctors found.</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Consultation;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}